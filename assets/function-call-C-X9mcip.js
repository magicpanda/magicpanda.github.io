import{c as e,d as t,f as n,l as r,m as i,p as a,s as o}from"./_plugin-vue_export-helper-BGPu65u-.js";import{At as s,B as c,G as l,H as u,J as d,M as f,R as p,S as m,U as h,V as g,_,a as v,c as y,d as b,dt as x,f as S,ft as C,g as w,i as T,it as E,k as D,kt as O,l as k,mt as A,q as j,r as M,t as N,tt as P,u as F,z as I}from"./index-Cx_W_gHZ.js";var[L,R]=w(`action-bar`),z=Symbol(L),B=y(C({name:L,props:{placeholder:Boolean,safeAreaInsetBottom:c},setup(e,{slots:t}){let n=s(),r=v(n,R),{linkChildren:i}=D(z);i();let a=()=>x(`div`,{ref:n,class:[R(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[t.default?.call(t)]);return()=>e.placeholder?r(a):a()}})),[V,H]=w(`button`),U=y(C({name:V,props:u({},M,{tag:p(`button`),text:String,icon:String,type:p(`default`),size:p(`normal`),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:p(`button`),loadingSize:I,loadingText:String,loadingType:String,iconPosition:p(`left`)}),emits:[`click`],setup(e,{emit:t,slots:n}){let r=T(),i=()=>n.loading?n.loading():x(a,{size:e.loadingSize,type:e.loadingType,class:H(`loading`)},null),o=()=>{if(e.loading)return i();if(n.icon)return x(`div`,{class:H(`icon`)},[n.icon()]);if(e.icon)return x(N,{name:e.icon,class:H(`icon`),classPrefix:e.iconPrefix},null)},s=()=>{let t;if(t=e.loading?e.loadingText:n.default?n.default():e.text,t)return x(`span`,{class:H(`text`)},[t])},c=()=>{let{color:t,plain:n}=e;if(t){let e={color:n?t:`white`};return n||(e.background=t),t.includes(`gradient`)?e.border=0:e.borderColor=t,e}},l=n=>{e.loading?m(n):e.disabled||(t(`click`,n),r())};return()=>{let{tag:t,type:n,size:r,block:i,round:a,plain:u,square:d,loading:f,disabled:p,hairline:m,nativeType:h,iconPosition:g}=e;return x(t,{type:h,class:[H([n,r,{plain:u,block:i,round:a,square:d,loading:f,disabled:p,hairline:m}]),{[b]:m}],style:c(),disabled:p,onClick:l},{default:()=>[x(`div`,{class:H(`content`)},[g===`left`&&o(),s(),g===`right`&&o()])]})}}})),[W,G]=w(`action-bar-button`),K=y(C({name:W,props:u({},M,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),setup(e,{slots:t}){let n=T(),{parent:r,index:a}=f(z),o=E(()=>{if(r){let e=r.children[a.value-1];return!(e&&`isButton`in e)}}),s=E(()=>{if(r){let e=r.children[a.value+1];return!(e&&`isButton`in e)}});return i({isButton:!0}),()=>{let{type:r,icon:i,text:a,color:c,loading:l,disabled:u}=e;return x(U,{class:G([r,{last:s.value,first:o.value}]),size:`large`,type:r,icon:i,color:c,loading:l,disabled:u,onClick:n},{default:()=>[t.default?t.default():a]})}}})),[q,J,Y]=w(`dialog`),X=u({},n,{title:String,theme:String,width:I,message:[String,Function],callback:Function,allowHtml:Boolean,className:null,transition:p(`van-dialog-bounce`),messageAlign:String,closeOnPopstate:c,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:c,closeOnClickOverlay:Boolean,keyboardEnabled:c,destroyOnClose:Boolean}),Z=[...t,`transition`,`closeOnPopstate`,`destroyOnClose`],Q=C({name:q,props:X,emits:[`confirm`,`cancel`,`keydown`,`update:show`],setup(e,{emit:t,slots:n}){let i=s(),a=O({confirm:!1,cancel:!1}),o=e=>t(`update:show`,e),c=t=>{var n;o(!1),(n=e.callback)==null||n.call(e,t)},u=n=>()=>{e.show&&(t(n),e.beforeClose?(a[n]=!0,k(e.beforeClose,{args:[n],done(){c(n),a[n]=!1},canceled(){a[n]=!1}})):c(n))},f=u(`cancel`),p=u(`confirm`),m=P(n=>{e.keyboardEnabled&&n.target===i.value?.popupRef?.value&&({Enter:e.showConfirmButton?p:j,Escape:e.showCancelButton?f:j}[n.key](),t(`keydown`,n))},[`enter`,`esc`]),h=()=>{let t=n.title?n.title():e.title;if(t)return x(`div`,{class:J(`header`,{isolated:!e.message&&!n.default})},[t])},g=t=>{let{message:n,allowHtml:r,messageAlign:i}=e,a=J(`message`,{"has-title":t,[i]:i}),o=l(n)?n():n;return r&&typeof o==`string`?x(`div`,{class:a,innerHTML:o},null):x(`div`,{class:a},[o])},v=()=>{if(n.default)return x(`div`,{class:J(`content`)},[n.default()]);let{title:t,message:r,allowHtml:i}=e;if(r){let e=!!(t||n.title);return x(`div`,{key:i?1:0,class:J(`content`,{isolated:!e})},[g(e)])}},y=()=>x(`div`,{class:[S,J(`footer`)]},[e.showCancelButton&&x(U,{size:`large`,text:e.cancelButtonText||Y(`cancel`),class:J(`cancel`),style:{color:e.cancelButtonColor},loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:f},null),e.showConfirmButton&&x(U,{size:`large`,text:e.confirmButtonText||Y(`confirm`),class:[J(`confirm`),{[F]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:p},null)]),b=()=>x(B,{class:J(`footer`)},{default:()=>[e.showCancelButton&&x(K,{type:`warning`,text:e.cancelButtonText||Y(`cancel`),class:J(`cancel`),color:e.cancelButtonColor,loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:f},null),e.showConfirmButton&&x(K,{type:`danger`,text:e.confirmButtonText||Y(`confirm`),class:J(`confirm`),color:e.confirmButtonColor,loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:p},null)]}),C=()=>n.footer?n.footer():e.theme===`round-button`?b():y();return()=>{let{width:t,title:n,theme:a,message:s,className:c}=e;return x(r,A({ref:i,role:`dialog`,class:[J([a]),c],style:{width:_(t)},tabindex:0,"aria-labelledby":n||s,onKeydown:m,"onUpdate:show":o},d(e,Z)),{default:()=>[h(),v(),C()]})}}}),$,ee=u({},{title:``,width:``,theme:null,message:``,overlay:!0,callback:null,teleport:`body`,className:``,allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:``,overlayStyle:void 0,messageAlign:``,cancelButtonText:``,cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:``,confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1});function te(){let t={setup(){let{state:t,toggle:n}=e();return()=>x(Q,A(t,{"onUpdate:show":n}),null)}};({instance:$}=o(t))}function ne(e){return h?new Promise((t,n)=>{$||te(),$.open(u({},ee,e,{callback:e=>{(e===`confirm`?t:n)(e)}}))}):Promise.resolve(void 0)}export{ne as t};