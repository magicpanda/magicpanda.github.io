import{At as e,B as t,Et as n,Ot as r,R as i,Tt as a,U as o,W as s,_ as c,_t as l,c as u,dt as d,ft as f,g as p,ht as m,it as h,mt as g,pt as _,t as v,yt as y,z as b}from"./index-Cx_W_gHZ.js";var[x,S]=p(`image`),C=u(f({name:x,props:{src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:b,height:b,radius:b,lazyLoad:Boolean,iconSize:b,showError:t,errorIcon:i(`photo-fail`),iconPrefix:String,showLoading:t,loadingIcon:i(`photo`),crossorigin:String,referrerpolicy:String,decoding:String},emits:[`load`,`error`],setup(t,{emit:i,slots:u}){let f=e(!1),p=e(!0),b=e(),{$Lazyload:x}=_().proxy,C=h(()=>{let e={width:c(t.width),height:c(t.height)};return s(t.radius)&&(e.overflow=`hidden`,e.borderRadius=c(t.radius)),e});n(()=>t.src,()=>{f.value=!1,p.value=!0});let w=e=>{p.value&&(p.value=!1,i(`load`,e))},T=()=>{let e=new Event(`load`);Object.defineProperty(e,`target`,{value:b.value,enumerable:!0}),w(e)},E=e=>{f.value=!0,p.value=!1,i(`error`,e)},D=(e,n,r)=>r?r():d(v,{name:e,size:t.iconSize,class:n,classPrefix:t.iconPrefix},null),O=()=>{if(p.value&&t.showLoading)return d(`div`,{class:S(`loading`)},[D(t.loadingIcon,S(`loading-icon`),u.loading)]);if(f.value&&t.showError)return d(`div`,{class:S(`error`)},[D(t.errorIcon,S(`error-icon`),u.error)])},k=()=>{if(f.value||!t.src)return;let e={alt:t.alt,class:S(`img`),decoding:t.decoding,style:{objectFit:t.fit,objectPosition:t.position},crossorigin:t.crossorigin,referrerpolicy:t.referrerpolicy};return t.lazyLoad?r(d(`img`,g({ref:b},e),null),[[a(`lazy`),t.src]]):d(`img`,g({ref:b,src:t.src,onLoad:w,onError:E},e),null)},A=({el:e})=>{let t=()=>{e===b.value&&p.value&&T()};b.value?t():m(t)},j=({el:e})=>{e===b.value&&!f.value&&E()};return x&&o&&(x.$on(`loaded`,A),x.$on(`error`,j),l(()=>{x.$off(`loaded`,A),x.$off(`error`,j)})),y(()=>{m(()=>{b.value?.complete&&!t.lazyLoad&&T()})}),()=>d(`div`,{class:S({round:t.round,block:t.block}),style:C.value},[k(),O(),u.default?.call(u)])}}));export{C as t};